<!DOCTYPE html>
<html>

<head>
  <title>jsPsych-math-games Example</title>
  <script src="https://unpkg.com/jspsych@8.2.2"></script>
  <link rel="stylesheet" href="https://unpkg.com/jspsych@8.2.2/css/jspsych.css" />
  <script src="https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0"></script>

  <script src="../dist/index.browser.js"></script>
  <!-- <script src="https://unpkg.com/plugin-math-games"></script> -->
</head>

<body>

  <div id="jspsych-target"></div>

  <script>
    // initialize jsPsych
    const jsPsych = initJsPsych({ display_element: 'jspsych-target' });

    const hello_trial = {
      type: jsPsychHtmlButtonResponse,
      stimulus: 'Hello world! Press any key to begin the math game trials.',
      choices: ['Begin']
    }

    // list your trial JSON files here
    const trialFiles = [
      'trials/trial1.json',
      'trials/trial2.json',
      'trials/trial3.json',
    ];

    // load every JSON, then map to plugin-defined trials
    Promise.all(trialFiles.map(path =>
      fetch(path).then(res => res.json())
    )).then(configs => {
      const trials = configs.map(cfg => ({
        type: jsPsychPluginMathGames,
        cover_story: cfg.cover_story,
        controls: cfg.controls,
        hint_type: cfg.hint_type,
        feedback_type: cfg.feedback_type
      }));

      // run all trials in sequence
      jsPsych.run([hello_trial, ...trials]);
    });
  </script>

</body>

</html>